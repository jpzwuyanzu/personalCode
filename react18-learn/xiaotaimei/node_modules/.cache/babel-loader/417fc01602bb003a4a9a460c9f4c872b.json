{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport { useEffect, useRef, useState } from 'react';\n// {[path]: count}\n// remove external when no used\nvar EXTERNAL_USED_COUNT = {};\nvar loadScript = function loadScript(path, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var script = document.querySelector(\"script[src=\\\"\".concat(path, \"\\\"]\"));\n  if (!script) {\n    var newScript_1 = document.createElement('script');\n    newScript_1.src = path;\n    Object.keys(props).forEach(function (key) {\n      newScript_1[key] = props[key];\n    });\n    newScript_1.setAttribute('data-status', 'loading');\n    document.body.appendChild(newScript_1);\n    return {\n      ref: newScript_1,\n      status: 'loading'\n    };\n  }\n  return {\n    ref: script,\n    status: script.getAttribute('data-status') || 'ready'\n  };\n};\nvar loadCss = function loadCss(path, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var css = document.querySelector(\"link[href=\\\"\".concat(path, \"\\\"]\"));\n  if (!css) {\n    var newCss_1 = document.createElement('link');\n    newCss_1.rel = 'stylesheet';\n    newCss_1.href = path;\n    Object.keys(props).forEach(function (key) {\n      newCss_1[key] = props[key];\n    });\n    // IE9+\n    var isLegacyIECss = ('hideFocus' in newCss_1);\n    // use preload in IE Edge (to detect load errors)\n    if (isLegacyIECss && newCss_1.relList) {\n      newCss_1.rel = 'preload';\n      newCss_1.as = 'style';\n    }\n    newCss_1.setAttribute('data-status', 'loading');\n    document.head.appendChild(newCss_1);\n    return {\n      ref: newCss_1,\n      status: 'loading'\n    };\n  }\n  return {\n    ref: css,\n    status: css.getAttribute('data-status') || 'ready'\n  };\n};\nvar useExternal = function useExternal(path, options) {\n  var _a = __read(useState(path ? 'loading' : 'unset'), 2),\n    status = _a[0],\n    setStatus = _a[1];\n  var ref = useRef();\n  useEffect(function () {\n    if (!path) {\n      setStatus('unset');\n      return;\n    }\n    var pathname = path.replace(/[|#].*$/, '');\n    if ((options === null || options === void 0 ? void 0 : options.type) === 'css' || !(options === null || options === void 0 ? void 0 : options.type) && /(^css!|\\.css$)/.test(pathname)) {\n      var result = loadCss(path, options === null || options === void 0 ? void 0 : options.css);\n      ref.current = result.ref;\n      setStatus(result.status);\n    } else if ((options === null || options === void 0 ? void 0 : options.type) === 'js' || !(options === null || options === void 0 ? void 0 : options.type) && /(^js!|\\.js$)/.test(pathname)) {\n      var result = loadScript(path, options === null || options === void 0 ? void 0 : options.js);\n      ref.current = result.ref;\n      setStatus(result.status);\n    } else {\n      // do nothing\n      console.error(\"Cannot infer the type of external resource, and please provide a type ('js' | 'css'). \" + 'Refer to the https://ahooks.js.org/hooks/dom/use-external/#options');\n    }\n    if (!ref.current) {\n      return;\n    }\n    if (EXTERNAL_USED_COUNT[path] === undefined) {\n      EXTERNAL_USED_COUNT[path] = 1;\n    } else {\n      EXTERNAL_USED_COUNT[path] += 1;\n    }\n    var handler = function handler(event) {\n      var _a;\n      var targetStatus = event.type === 'load' ? 'ready' : 'error';\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.setAttribute('data-status', targetStatus);\n      setStatus(targetStatus);\n    };\n    ref.current.addEventListener('load', handler);\n    ref.current.addEventListener('error', handler);\n    return function () {\n      var _a, _b, _c;\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('load', handler);\n      (_b = ref.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('error', handler);\n      EXTERNAL_USED_COUNT[path] -= 1;\n      if (EXTERNAL_USED_COUNT[path] === 0) {\n        (_c = ref.current) === null || _c === void 0 ? void 0 : _c.remove();\n      }\n      ref.current = undefined;\n    };\n  }, [path]);\n  return status;\n};\nexport default useExternal;","map":{"version":3,"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","useEffect","useRef","useState","EXTERNAL_USED_COUNT","loadScript","path","props","script","document","querySelector","concat","newScript_1","createElement","src","Object","keys","forEach","key","setAttribute","body","appendChild","ref","status","getAttribute","loadCss","css","newCss_1","rel","href","isLegacyIECss","relList","as","head","useExternal","options","_a","setStatus","pathname","replace","type","test","result","current","js","console","undefined","handler","event","targetStatus","addEventListener","_b","_c","removeEventListener","remove"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/node_modules/ahooks/es/useExternal/index.js"],"sourcesContent":["var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport { useEffect, useRef, useState } from 'react';\n// {[path]: count}\n// remove external when no used\nvar EXTERNAL_USED_COUNT = {};\nvar loadScript = function loadScript(path, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var script = document.querySelector(\"script[src=\\\"\".concat(path, \"\\\"]\"));\n  if (!script) {\n    var newScript_1 = document.createElement('script');\n    newScript_1.src = path;\n    Object.keys(props).forEach(function (key) {\n      newScript_1[key] = props[key];\n    });\n    newScript_1.setAttribute('data-status', 'loading');\n    document.body.appendChild(newScript_1);\n    return {\n      ref: newScript_1,\n      status: 'loading'\n    };\n  }\n  return {\n    ref: script,\n    status: script.getAttribute('data-status') || 'ready'\n  };\n};\nvar loadCss = function loadCss(path, props) {\n  if (props === void 0) {\n    props = {};\n  }\n  var css = document.querySelector(\"link[href=\\\"\".concat(path, \"\\\"]\"));\n  if (!css) {\n    var newCss_1 = document.createElement('link');\n    newCss_1.rel = 'stylesheet';\n    newCss_1.href = path;\n    Object.keys(props).forEach(function (key) {\n      newCss_1[key] = props[key];\n    });\n    // IE9+\n    var isLegacyIECss = ('hideFocus' in newCss_1);\n    // use preload in IE Edge (to detect load errors)\n    if (isLegacyIECss && newCss_1.relList) {\n      newCss_1.rel = 'preload';\n      newCss_1.as = 'style';\n    }\n    newCss_1.setAttribute('data-status', 'loading');\n    document.head.appendChild(newCss_1);\n    return {\n      ref: newCss_1,\n      status: 'loading'\n    };\n  }\n  return {\n    ref: css,\n    status: css.getAttribute('data-status') || 'ready'\n  };\n};\nvar useExternal = function useExternal(path, options) {\n  var _a = __read(useState(path ? 'loading' : 'unset'), 2),\n    status = _a[0],\n    setStatus = _a[1];\n  var ref = useRef();\n  useEffect(function () {\n    if (!path) {\n      setStatus('unset');\n      return;\n    }\n    var pathname = path.replace(/[|#].*$/, '');\n    if ((options === null || options === void 0 ? void 0 : options.type) === 'css' || !(options === null || options === void 0 ? void 0 : options.type) && /(^css!|\\.css$)/.test(pathname)) {\n      var result = loadCss(path, options === null || options === void 0 ? void 0 : options.css);\n      ref.current = result.ref;\n      setStatus(result.status);\n    } else if ((options === null || options === void 0 ? void 0 : options.type) === 'js' || !(options === null || options === void 0 ? void 0 : options.type) && /(^js!|\\.js$)/.test(pathname)) {\n      var result = loadScript(path, options === null || options === void 0 ? void 0 : options.js);\n      ref.current = result.ref;\n      setStatus(result.status);\n    } else {\n      // do nothing\n      console.error(\"Cannot infer the type of external resource, and please provide a type ('js' | 'css'). \" + 'Refer to the https://ahooks.js.org/hooks/dom/use-external/#options');\n    }\n    if (!ref.current) {\n      return;\n    }\n    if (EXTERNAL_USED_COUNT[path] === undefined) {\n      EXTERNAL_USED_COUNT[path] = 1;\n    } else {\n      EXTERNAL_USED_COUNT[path] += 1;\n    }\n    var handler = function handler(event) {\n      var _a;\n      var targetStatus = event.type === 'load' ? 'ready' : 'error';\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.setAttribute('data-status', targetStatus);\n      setStatus(targetStatus);\n    };\n    ref.current.addEventListener('load', handler);\n    ref.current.addEventListener('error', handler);\n    return function () {\n      var _a, _b, _c;\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('load', handler);\n      (_b = ref.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('error', handler);\n      EXTERNAL_USED_COUNT[path] -= 1;\n      if (EXTERNAL_USED_COUNT[path] === 0) {\n        (_c = ref.current) === null || _c === void 0 ? void 0 : _c.remove();\n      }\n      ref.current = undefined;\n    };\n  }, [path]);\n  return status;\n};\nexport default useExternal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}