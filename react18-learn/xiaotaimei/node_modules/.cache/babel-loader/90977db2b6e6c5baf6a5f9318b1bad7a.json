{"ast":null,"code":"import useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useEffectWithTarget from '../utils/useEffectWithTarget';\nvar useDrag = function useDrag(data, target, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var optionsRef = useLatest(options);\n  var dataRef = useLatest(data);\n  useEffectWithTarget(function () {\n    var targetElement = getTargetElement(target);\n    if (!(targetElement === null || targetElement === void 0 ? void 0 : targetElement.addEventListener)) {\n      return;\n    }\n    var onDragStart = function onDragStart(event) {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n      event.dataTransfer.setData('custom', JSON.stringify(dataRef.current));\n    };\n    var onDragEnd = function onDragEnd(event) {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    };\n    targetElement.setAttribute('draggable', 'true');\n    targetElement.addEventListener('dragstart', onDragStart);\n    targetElement.addEventListener('dragend', onDragEnd);\n    return function () {\n      targetElement.removeEventListener('dragstart', onDragStart);\n      targetElement.removeEventListener('dragend', onDragEnd);\n    };\n  }, [], target);\n};\nexport default useDrag;","map":{"version":3,"names":["useLatest","getTargetElement","useEffectWithTarget","useDrag","data","target","options","optionsRef","dataRef","targetElement","addEventListener","onDragStart","event","_a","_b","current","call","dataTransfer","setData","JSON","stringify","onDragEnd","setAttribute","removeEventListener"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/node_modules/ahooks/es/useDrag/index.js"],"sourcesContent":["import useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useEffectWithTarget from '../utils/useEffectWithTarget';\nvar useDrag = function useDrag(data, target, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var optionsRef = useLatest(options);\n  var dataRef = useLatest(data);\n  useEffectWithTarget(function () {\n    var targetElement = getTargetElement(target);\n    if (!(targetElement === null || targetElement === void 0 ? void 0 : targetElement.addEventListener)) {\n      return;\n    }\n    var onDragStart = function onDragStart(event) {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n      event.dataTransfer.setData('custom', JSON.stringify(dataRef.current));\n    };\n    var onDragEnd = function onDragEnd(event) {\n      var _a, _b;\n      (_b = (_a = optionsRef.current).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    };\n    targetElement.setAttribute('draggable', 'true');\n    targetElement.addEventListener('dragstart', onDragStart);\n    targetElement.addEventListener('dragend', onDragEnd);\n    return function () {\n      targetElement.removeEventListener('dragstart', onDragStart);\n      targetElement.removeEventListener('dragend', onDragEnd);\n    };\n  }, [], target);\n};\nexport default useDrag;"],"mappings":"AAAA,OAAOA,SAAS,MAAM,cAAc;AACpC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,OAAOC,mBAAmB,MAAM,8BAA8B;AAC9D,IAAIC,OAAO,GAAG,SAASA,OAAO,CAACC,IAAI,EAAEC,MAAM,EAAEC,OAAO,EAAE;EACpD,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;IACtBA,OAAO,GAAG,CAAC,CAAC;EACd;EACA,IAAIC,UAAU,GAAGP,SAAS,CAACM,OAAO,CAAC;EACnC,IAAIE,OAAO,GAAGR,SAAS,CAACI,IAAI,CAAC;EAC7BF,mBAAmB,CAAC,YAAY;IAC9B,IAAIO,aAAa,GAAGR,gBAAgB,CAACI,MAAM,CAAC;IAC5C,IAAI,EAAEI,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,aAAa,CAACC,gBAAgB,CAAC,EAAE;MACnG;IACF;IACA,IAAIC,WAAW,GAAG,SAASA,WAAW,CAACC,KAAK,EAAE;MAC5C,IAAIC,EAAE,EAAEC,EAAE;MACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAGN,UAAU,CAACQ,OAAO,EAAEJ,WAAW,MAAM,IAAI,IAAIG,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACE,IAAI,CAACH,EAAE,EAAED,KAAK,CAAC;MACpGA,KAAK,CAACK,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAACZ,OAAO,CAACO,OAAO,CAAC,CAAC;IACvE,CAAC;IACD,IAAIM,SAAS,GAAG,SAASA,SAAS,CAACT,KAAK,EAAE;MACxC,IAAIC,EAAE,EAAEC,EAAE;MACV,CAACA,EAAE,GAAG,CAACD,EAAE,GAAGN,UAAU,CAACQ,OAAO,EAAEM,SAAS,MAAM,IAAI,IAAIP,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACE,IAAI,CAACH,EAAE,EAAED,KAAK,CAAC;IACpG,CAAC;IACDH,aAAa,CAACa,YAAY,CAAC,WAAW,EAAE,MAAM,CAAC;IAC/Cb,aAAa,CAACC,gBAAgB,CAAC,WAAW,EAAEC,WAAW,CAAC;IACxDF,aAAa,CAACC,gBAAgB,CAAC,SAAS,EAAEW,SAAS,CAAC;IACpD,OAAO,YAAY;MACjBZ,aAAa,CAACc,mBAAmB,CAAC,WAAW,EAAEZ,WAAW,CAAC;MAC3DF,aAAa,CAACc,mBAAmB,CAAC,SAAS,EAAEF,SAAS,CAAC;IACzD,CAAC;EACH,CAAC,EAAE,EAAE,EAAEhB,MAAM,CAAC;AAChB,CAAC;AACD,eAAeF,OAAO"},"metadata":{},"sourceType":"module"}