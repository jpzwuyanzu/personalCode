{"ast":null,"code":"import React, { useRef, useState } from 'react';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { ShouldRender } from '../../utils/should-render';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from '../popup/popup-base-props';\nconst defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  getContainer: null\n});\nexport const CenterPopup = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onRest: () => {\n      var _a, _b;\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  useIsomorphicLayoutEffect(() => {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  const ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active);\n  const maskVisible = useInnerVisible(active && props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames('adm-center-popup-body', props.bodyClassName),\n    style: props.bodyStyle\n  }, props.children);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: 'adm-center-popup',\n    style: {\n      display: active ? undefined : 'none',\n      pointerEvents: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: e => {\n      var _a, _b;\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    style: props.maskStyle,\n    className: classNames('adm-center-popup-mask', props.maskClassName),\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(\"div\", {\n    className: 'adm-center-popup-wrap',\n    role: props.role,\n    \"aria-label\": props['aria-label']\n  }, React.createElement(animated.div, {\n    style: style,\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames('adm-center-popup-close', 'adm-plain-anchor'),\n    onClick: () => {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseOutline, null)), body)))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};","map":{"version":3,"names":["React","useRef","useState","renderToContainer","Mask","withStopPropagation","mergeProps","useIsomorphicLayoutEffect","useUnmountedRef","animated","useSpring","useInnerVisible","classNames","withNativeProps","ShouldRender","useLockScroll","CloseOutline","defaultPopupBaseProps","defaultProps","Object","assign","getContainer","CenterPopup","p","props","unmountedRef","style","scale","visible","opacity","config","mass","tension","friction","clamp","onRest","_a","_b","current","setActive","afterShow","call","afterClose","active","ref","disableBodyScroll","maskVisible","body","createElement","className","bodyClassName","bodyStyle","children","node","stopPropagation","display","undefined","pointerEvents","mask","forceRender","destroyOnClose","onMaskClick","e","closeOnMaskClick","onClose","maskStyle","maskClassName","role","div","showCloseButton","onClick"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/node_modules/antd-mobile/es/components/center-popup/center-popup.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useIsomorphicLayoutEffect, useUnmountedRef } from 'ahooks';\nimport { animated, useSpring } from '@react-spring/web';\nimport { useInnerVisible } from '../../utils/use-inner-visible';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { ShouldRender } from '../../utils/should-render';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { CloseOutline } from 'antd-mobile-icons';\nimport { defaultPopupBaseProps } from '../popup/popup-base-props';\nconst defaultProps = Object.assign(Object.assign({}, defaultPopupBaseProps), {\n  getContainer: null\n});\nexport const CenterPopup = p => {\n  const props = mergeProps(defaultProps, p);\n  const unmountedRef = useUnmountedRef();\n  const style = useSpring({\n    scale: props.visible ? 1 : 0.8,\n    opacity: props.visible ? 1 : 0,\n    config: {\n      mass: 1.2,\n      tension: 200,\n      friction: 25,\n      clamp: true\n    },\n    onRest: () => {\n      var _a, _b;\n      if (unmountedRef.current) return;\n      setActive(props.visible);\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  });\n  const [active, setActive] = useState(props.visible);\n  useIsomorphicLayoutEffect(() => {\n    if (props.visible) {\n      setActive(true);\n    }\n  }, [props.visible]);\n  const ref = useRef(null);\n  useLockScroll(ref, props.disableBodyScroll && active);\n  const maskVisible = useInnerVisible(active && props.visible);\n  const body = React.createElement(\"div\", {\n    className: classNames('adm-center-popup-body', props.bodyClassName),\n    style: props.bodyStyle\n  }, props.children);\n  const node = withStopPropagation(props.stopPropagation, withNativeProps(props, React.createElement(\"div\", {\n    className: 'adm-center-popup',\n    style: {\n      display: active ? undefined : 'none',\n      pointerEvents: active ? undefined : 'none'\n    }\n  }, props.mask && React.createElement(Mask, {\n    visible: maskVisible,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose,\n    onMaskClick: e => {\n      var _a, _b;\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    style: props.maskStyle,\n    className: classNames('adm-center-popup-mask', props.maskClassName),\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), React.createElement(\"div\", {\n    className: 'adm-center-popup-wrap',\n    role: props.role,\n    \"aria-label\": props['aria-label']\n  }, React.createElement(animated.div, {\n    style: style,\n    ref: ref\n  }, props.showCloseButton && React.createElement(\"a\", {\n    className: classNames('adm-center-popup-close', 'adm-plain-anchor'),\n    onClick: () => {\n      var _a;\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, React.createElement(CloseOutline, null)), body)))));\n  return React.createElement(ShouldRender, {\n    active: active,\n    forceRender: props.forceRender,\n    destroyOnClose: props.destroyOnClose\n  }, renderToContainer(props.getContainer, node));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}