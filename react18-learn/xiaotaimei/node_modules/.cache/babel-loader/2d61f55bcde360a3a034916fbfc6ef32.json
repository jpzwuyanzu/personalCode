{"ast":null,"code":"import React, { memo, useContext } from 'react';\nimport { FieldContext, useWatch } from 'rc-field-form';\nimport { useUpdate } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nexport const FormSubscribe = props => {\n  const update = useUpdate();\n  const form = useContext(FieldContext);\n  return React.createElement(React.Fragment, null, props.children(form.getFieldsValue(props.to), form), props.to.map(namePath => React.createElement(Watcher, {\n    key: namePath.toString(),\n    form: form,\n    namePath: namePath,\n    onChange: update\n  })));\n};\nexport const Watcher = memo(props => {\n  const value = useWatch(props.namePath, props.form);\n  useIsomorphicUpdateLayoutEffect(() => {\n    props.onChange();\n  }, [value]);\n  return null;\n});","map":{"version":3,"names":["React","memo","useContext","FieldContext","useWatch","useUpdate","useIsomorphicUpdateLayoutEffect","FormSubscribe","props","update","form","createElement","Fragment","children","getFieldsValue","to","map","namePath","Watcher","key","toString","onChange","value"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/node_modules/antd-mobile/es/components/form/form-subscribe.js"],"sourcesContent":["import React, { memo, useContext } from 'react';\nimport { FieldContext, useWatch } from 'rc-field-form';\nimport { useUpdate } from 'ahooks';\nimport { useIsomorphicUpdateLayoutEffect } from '../../utils/use-isomorphic-update-layout-effect';\nexport const FormSubscribe = props => {\n  const update = useUpdate();\n  const form = useContext(FieldContext);\n  return React.createElement(React.Fragment, null, props.children(form.getFieldsValue(props.to), form), props.to.map(namePath => React.createElement(Watcher, {\n    key: namePath.toString(),\n    form: form,\n    namePath: namePath,\n    onChange: update\n  })));\n};\nexport const Watcher = memo(props => {\n  const value = useWatch(props.namePath, props.form);\n  useIsomorphicUpdateLayoutEffect(() => {\n    props.onChange();\n  }, [value]);\n  return null;\n});"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,IAAI,EAAEC,UAAU,QAAQ,OAAO;AAC/C,SAASC,YAAY,EAAEC,QAAQ,QAAQ,eAAe;AACtD,SAASC,SAAS,QAAQ,QAAQ;AAClC,SAASC,+BAA+B,QAAQ,iDAAiD;AACjG,OAAO,MAAMC,aAAa,GAAGC,KAAK,IAAI;EACpC,MAAMC,MAAM,GAAGJ,SAAS,EAAE;EAC1B,MAAMK,IAAI,GAAGR,UAAU,CAACC,YAAY,CAAC;EACrC,OAAOH,KAAK,CAACW,aAAa,CAACX,KAAK,CAACY,QAAQ,EAAE,IAAI,EAAEJ,KAAK,CAACK,QAAQ,CAACH,IAAI,CAACI,cAAc,CAACN,KAAK,CAACO,EAAE,CAAC,EAAEL,IAAI,CAAC,EAAEF,KAAK,CAACO,EAAE,CAACC,GAAG,CAACC,QAAQ,IAAIjB,KAAK,CAACW,aAAa,CAACO,OAAO,EAAE;IAC1JC,GAAG,EAAEF,QAAQ,CAACG,QAAQ,EAAE;IACxBV,IAAI,EAAEA,IAAI;IACVO,QAAQ,EAAEA,QAAQ;IAClBI,QAAQ,EAAEZ;EACZ,CAAC,CAAC,CAAC,CAAC;AACN,CAAC;AACD,OAAO,MAAMS,OAAO,GAAGjB,IAAI,CAACO,KAAK,IAAI;EACnC,MAAMc,KAAK,GAAGlB,QAAQ,CAACI,KAAK,CAACS,QAAQ,EAAET,KAAK,CAACE,IAAI,CAAC;EAClDJ,+BAA+B,CAAC,MAAM;IACpCE,KAAK,CAACa,QAAQ,EAAE;EAClB,CAAC,EAAE,CAACC,KAAK,CAAC,CAAC;EACX,OAAO,IAAI;AACb,CAAC,CAAC"},"metadata":{},"sourceType":"module"}