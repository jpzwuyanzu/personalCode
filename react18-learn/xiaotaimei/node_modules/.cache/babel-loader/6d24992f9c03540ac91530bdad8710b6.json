{"ast":null,"code":"import { Globals } from '@react-spring/web';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nlet reduced = false;\nconst subscribers = new Set();\nfunction notify() {\n  subscribers.forEach(subscriber => {\n    subscriber();\n  });\n}\nexport function reduceMotion() {\n  reduced = true;\n  notify();\n  Globals.assign({\n    skipAnimation: true\n  });\n}\nexport function restoreMotion() {\n  reduced = false;\n  notify();\n  Globals.assign({\n    skipAnimation: false\n  });\n}\nexport function isMotionReduced() {\n  return reduced;\n}\nexport function useMotionReduced() {\n  return useSyncExternalStore(onStoreChange => {\n    subscribers.add(onStoreChange);\n    return () => {\n      subscribers.delete(onStoreChange);\n    };\n  }, isMotionReduced);\n}","map":{"version":3,"names":["Globals","useSyncExternalStore","reduced","subscribers","Set","notify","forEach","subscriber","reduceMotion","assign","skipAnimation","restoreMotion","isMotionReduced","useMotionReduced","onStoreChange","add","delete"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/node_modules/antd-mobile/es/utils/reduce-and-restore-motion.js"],"sourcesContent":["import { Globals } from '@react-spring/web';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nlet reduced = false;\nconst subscribers = new Set();\nfunction notify() {\n  subscribers.forEach(subscriber => {\n    subscriber();\n  });\n}\nexport function reduceMotion() {\n  reduced = true;\n  notify();\n  Globals.assign({\n    skipAnimation: true\n  });\n}\nexport function restoreMotion() {\n  reduced = false;\n  notify();\n  Globals.assign({\n    skipAnimation: false\n  });\n}\nexport function isMotionReduced() {\n  return reduced;\n}\nexport function useMotionReduced() {\n  return useSyncExternalStore(onStoreChange => {\n    subscribers.add(onStoreChange);\n    return () => {\n      subscribers.delete(onStoreChange);\n    };\n  }, isMotionReduced);\n}"],"mappings":"AAAA,SAASA,OAAO,QAAQ,mBAAmB;AAC3C,SAASC,oBAAoB,QAAQ,8BAA8B;AACnE,IAAIC,OAAO,GAAG,KAAK;AACnB,MAAMC,WAAW,GAAG,IAAIC,GAAG,EAAE;AAC7B,SAASC,MAAM,GAAG;EAChBF,WAAW,CAACG,OAAO,CAACC,UAAU,IAAI;IAChCA,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AACA,OAAO,SAASC,YAAY,GAAG;EAC7BN,OAAO,GAAG,IAAI;EACdG,MAAM,EAAE;EACRL,OAAO,CAACS,MAAM,CAAC;IACbC,aAAa,EAAE;EACjB,CAAC,CAAC;AACJ;AACA,OAAO,SAASC,aAAa,GAAG;EAC9BT,OAAO,GAAG,KAAK;EACfG,MAAM,EAAE;EACRL,OAAO,CAACS,MAAM,CAAC;IACbC,aAAa,EAAE;EACjB,CAAC,CAAC;AACJ;AACA,OAAO,SAASE,eAAe,GAAG;EAChC,OAAOV,OAAO;AAChB;AACA,OAAO,SAASW,gBAAgB,GAAG;EACjC,OAAOZ,oBAAoB,CAACa,aAAa,IAAI;IAC3CX,WAAW,CAACY,GAAG,CAACD,aAAa,CAAC;IAC9B,OAAO,MAAM;MACXX,WAAW,CAACa,MAAM,CAACF,aAAa,CAAC;IACnC,CAAC;EACH,CAAC,EAAEF,eAAe,CAAC;AACrB"},"metadata":{},"sourceType":"module"}